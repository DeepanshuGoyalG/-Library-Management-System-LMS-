{% extends 'base.html' %}

{% block title %}
{% if user %}Edit User{% else %}Add User{% endif %} - Admin
{% endblock %}

{% block content %}
<h3>{% if user %}Edit User{% else %}Add User{% endif %}</h3>

<form method="POST" action="">
  <!-- CSRF Token -->
  {{ form.csrf_token }}

  <div class="form-group">
    <label for="name">Name</label>
    <input type="text" name="name" class="form-control" id="name" placeholder="Full Name"
           value="{{ user.name if user else '' }}" required>
  </div>

  <div class="form-group">
    <label for="email">Email</label>
    <input type="email" name="email" class="form-control" id="email" placeholder="Email Address"
           value="{{ user.email if user else '' }}" required>
  </div>

  {% if not user %}
  <div class="form-group">
    <label for="password">Password</label>
    <input type="password" name="password" class="form-control" id="password" placeholder="Password" required>
  </div>
  {% endif %}

  <div class="form-group">
    <label for="role">Role</label>
    <select name="role" id="role" class="form-control" required>
      <option value="user" {% if user and user.role=='user' %}selected{% endif %}>User</option>
      <option value="admin" {% if user and user.role=='admin' %}selected{% endif %}>Admin</option>
    </select>
  </div>

  <button type="submit" class="btn btn-success">{% if user %}Update{% else %}Add{% endif %}</button>
  <a href="{{ url_for('admin.manage_users') }}" class="btn btn-secondary">Cancel</a>
</form>
{% endblock %}
